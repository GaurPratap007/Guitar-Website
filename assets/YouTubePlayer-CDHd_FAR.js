import{r as a,j as s}from"./index-CxatF-2z.js";function m({videoId:d,onTime:o,onPlayState:c}){const l=a.useRef(null),n=a.useRef(null),[p,f]=a.useState(!1);return a.useEffect(()=>{let e=!0;function r(){if(window.YT&&window.YT.Player){u();return}const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t),window.onYouTubeIframeAPIReady=()=>u()}function u(){e&&(n.current=new window.YT.Player(l.current,{height:"100%",width:"100%",videoId:d,playerVars:{rel:0},events:{onReady:()=>f(!0),onStateChange:t=>{const i=t.data===window.YT.PlayerState.PLAYING;c==null||c(i)}}}))}return r(),()=>{e=!1,n.current&&n.current.destroy&&n.current.destroy()}},[d,c]),a.useEffect(()=>{if(!p)return;let e=null;const r=()=>{var t,i;const u=(i=(t=n.current)==null?void 0:t.getCurrentTime)==null?void 0:i.call(t);typeof u=="number"&&(o==null||o(u)),e=window.requestAnimationFrame(r)};return e=window.requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}},[p,o]),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"relative w-full aspect-video",children:s.jsx("div",{ref:l,className:"absolute inset-0"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{var e,r;return(r=(e=n.current)==null?void 0:e.playVideo)==null?void 0:r.call(e)},children:"Play"}),s.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{var e,r;return(r=(e=n.current)==null?void 0:e.pauseVideo)==null?void 0:r.call(e)},children:"Pause"}),s.jsx("button",{className:"px-2 py-1 border rounded",onClick:()=>{const e=`https://www.youtube.com/watch?v=${d}`;window.open(e,"_blank","noopener")},children:"Pop out"})]})]})}export{m as default};
